<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pesanan - BSI UMKM Center Yogyakarta</title>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* RESET */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        /* VARIABLES */
        :root {
            --primary-teal: #00A39D;
            --secondary-orange: #F8AD3C;
            --text-primary: #2C3E50;
            --text-secondary: #7F8C8D;
            --text-muted: #6C757D;
            --gray-50: #F8F9FA;
            --gray-100: #E9ECEF;
            --gray-200: #DEE2E6;
            --white: #FFFFFF;
            --error: #E74C3C;
            --dashboard-bg: #F5F6FA;
        }
        
        body {
            font-family: 'Lato', sans-serif;
            background: var(--dashboard-bg);
            color: var(--text-primary);
        }
        
        /* LAYOUT */
        .dashboard-layout {
            display: grid;
            grid-template-columns: 280px 1fr;
            grid-template-rows: 70px 1fr;
            grid-template-areas: "sidebar header" "sidebar main";
            height: 100vh;
            overflow: hidden;
        }
        
        .dashboard-sidebar {
            grid-area: sidebar;
            background: var(--primary-teal);
            overflow-y: auto;
            height: 100vh;
        }
        
        .dashboard-header {
            grid-area: header;
            background: var(--white);
            border-bottom: 1px solid var(--gray-200);
        }
        
        .dashboard-main {
            grid-area: main;
            padding: 20px;
            overflow-y: auto;
            height: calc(100vh - 70px);
        }
        
        /* SIDEBAR */
        .sidebar {
            padding: 24px 0;
        }
        
        .sidebar__logo {
            padding: 40px 24px 40px 24px;
            margin-bottom: 32px;
            background: var(--primary-teal);
            display: flex;
            align-items: center;
            justify-content: flex-start;
            gap: 0;
            position: relative;
        }
        
        .logo-text {
            color: white;
            text-align: left;
            position: relative;
            display: flex;
            align-items: center;
            gap: 4px;
        }
        
        .logo-text__brand {
            font-size: 52px;
            font-weight: 700;
            line-height: 1;
            letter-spacing: -1px;
            position: relative;
        }
        
        .logo-text__subtitle {
            font-size: 12px;
            font-weight: 400;
            letter-spacing: 2.5px;
            line-height: 1.5;
            white-space: nowrap;
        }
        
        .logo-star {
            color: var(--secondary-orange);
            width: 28px;
            height: 28px;
            position: absolute;
            top: -18px;
            left: 60px;
        }
        
        .nav-list {
            list-style: none;
            padding: 0 20px;
        }
        
        .nav-link {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            color: rgba(255,255,255,0.8);
            text-decoration: none;
            border-radius: 8px;
            margin-bottom: 6px;
            font-size: 15px;
        }
        
        .nav-link:hover {
            background: rgba(255,255,255,0.1);
            color: white;
        }
        
        .nav-item--active .nav-link {
            background: rgba(255,255,255,0.15);
            color: white;
            font-weight: 600;
        }
        
        .nav-icon {
            width: 20px;
            font-size: 20px;
        }
        
        /* SUBMENU STYLES */
        .nav-item-has-submenu {
            position: relative;
        }
        
        .nav-item-has-submenu > .nav-link {
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: relative;
        }
        
        .submenu-arrow {
            font-size: 12px;
            transition: transform 0.3s ease;
            margin-left: auto;
        }
        
        .nav-item-has-submenu.submenu-open .submenu-arrow {
            transform: rotate(180deg);
        }
        
        .nav-submenu {
            list-style: none;
            padding: 0;
            margin: 0;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
            background: rgba(0, 0, 0, 0.1);
        }
        
        .nav-item-has-submenu.submenu-open .nav-submenu {
            max-height: 300px;
        }
        
        .nav-submenu-item {
            margin: 0;
        }
        
        .nav-submenu-link {
            display: flex;
            align-items: center;
            padding: 12px 20px 12px 60px;
            color: rgba(255, 255, 255, 0.8);
            text-decoration: none;
            font-size: 14px;
            transition: all 0.2s ease;
        }
        
        .nav-submenu-link:hover {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            padding-left: 65px;
        }
        
        .nav-submenu-link.active {
            background: rgba(255, 255, 255, 0.15);
            color: var(--secondary-orange);
            font-weight: 600;
        }
        
        /* HEADER */
        .header {
            display: flex;
            align-items: center;
            gap: 20px;
            padding: 0 24px;
            height: 100%;
            position: relative;
        }
        
        .header__toggle {
            display: none;
            width: 40px;
            height: 40px;
            background: none;
            border: none;
            color: var(--primary-teal);
            font-size: 20px;
            cursor: pointer;
            border-radius: 8px;
        }
        
        .header__toggle:hover {
            background: var(--gray-50);
        }
        
        .header__search {
            display: flex;
            align-items: center;
            gap: 12px;
            flex: 1;
            max-width: 400px;
            position: relative;
            z-index: 10;
        }
        
        .search-decoration {
            position: absolute;
            top: -24px;
            left: -24px;
            width: 80px;
            height: auto;
            pointer-events: none;
            z-index: 0;
        }
        
        .search-input {
            flex: 1;
            padding: 8px 0;
            border: none;
            outline: none;
            font-size: 14px;
            background: transparent;
            position: relative;
            z-index: 10;
        }
        
        .header__actions {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-left: auto;
            position: relative;
        }
        
        .header-decoration-right {
            position: absolute;
            top: -12px;
            right: -24px;
            width: 70px;
            height: auto;
            pointer-events: none;
            z-index: 0;
        }
        
        .action-btn {
            position: relative;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: none;
            border: none;
            color: var(--text-muted);
            font-size: 20px;
            cursor: pointer;
            border-radius: 8px;
            z-index: 10;
        }
        
        .action-badge {
            position: absolute;
            top: 6px;
            right: 6px;
            min-width: 18px;
            height: 18px;
            background: var(--error);
            color: white;
            font-size: 11px;
            font-weight: 700;
            border-radius: 9px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .user-profile__toggle {
            display: flex;
            align-items: center;
            gap: 12px;
            background: none;
            border: none;
            cursor: pointer;
            position: relative;
            z-index: 10;
        }
        
        .user-avatar {
            width: 46px;
            height: 46px;
            border-radius: 50%;
        }
        
        .user-info {
            text-align: left;
        }
        
        .user-name {
            display: block;
            font-size: 14px;
            font-weight: 600;
        }
        
        .user-role {
            display: block;
            font-size: 12px;
            color: var(--text-secondary);
        }
        
        /* BREADCRUMB */
        .breadcrumb {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }
        
        .breadcrumb-title {
            font-size: 24px;
            font-weight: 600;
        }
        
        .breadcrumb-nav {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            color: var(--text-secondary);
        }
        
        .breadcrumb-nav a {
            color: var(--text-secondary);
            text-decoration: none;
        }
        
        .breadcrumb-nav a:hover {
            color: var(--primary-teal);
        }
        
        .breadcrumb-nav span {
            color: var(--text-primary);
            font-weight: 600;
        }
        
        /* TABLE CARD */
        .table-card {
            background: white;
            border-radius: 10px;
            padding: 24px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        .table-header {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 24px;
        }
        
        .table-search {
            display: flex;
            align-items: center;
            gap: 12px;
            flex: 1;
            max-width: 300px;
        }
        
        .table-search input {
            flex: 1;
            padding: 8px 0;
            border: none;
            outline: none;
            font-size: 14px;
        }
        
        /* TABLE */
        table {
            width: 100%;
            border-collapse: collapse;
        }
        
        thead {
            border-bottom: 1px solid var(--gray-200);
        }
        
        th {
            padding: 16px 12px;
            text-align: left;
            font-size: 14px;
            font-weight: 600;
            color: var(--text-primary);
        }
        
        tbody tr {
            border-bottom: 1px solid var(--gray-200);
        }
        
        tbody tr:last-child {
            border-bottom: none;
        }
        
        tbody tr:hover {
            background: var(--gray-50);
        }
        
        td {
            padding: 16px 12px;
            font-size: 14px;
        }
        
        .action-icons {
            display: flex;
            gap: 16px;
            justify-content: center;
        }
        
        .action-icon {
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 18px;
        }
        
        .action-icon:hover {
            color: var(--primary-teal);
        }
        
        /* PAGINATION */
        .table-pagination {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 24px;
            font-size: 14px;
            color: var(--text-secondary);
        }
        
        .pagination-controls {
            display: flex;
            gap: 8px;
        }
        
        .pagination-btn {
            width: 36px;
            height: 36px;
            border: 1px solid var(--gray-200);
            border-radius: 6px;
            background: white;
            cursor: pointer;
            color: var(--text-secondary);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .pagination-btn:hover {
            background: var(--gray-50);
        }
        
        .pagination-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        /* MODAL PESANAN STYLES */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 9999;
            align-items: center;
            justify-content: center;
            padding: 20px;
            overflow-y: auto;
        }
        
        .modal-pesanan-container {
            background: #ffffff;
            border-radius: 10px;
            box-shadow: 0px 4px 14px 0px rgba(38, 43, 67, 0.16);
            width: 100%;
            max-width: 554px;
            max-height: 90vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
        
        .modal-close {
            position: absolute;
            right: 20px;
            top: 20px;
            background: transparent;
            border: none;
            color: #ffffff;
            font-size: 20px;
            cursor: pointer;
            width: 28px;
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: opacity 0.2s;
            z-index: 10;
        }
        
        .modal-close:hover {
            opacity: 0.8;
        }
        
        .modal-header {
            background: var(--primary-teal);
            padding: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }
        
        .modal-title {
            font-family: 'Lato', sans-serif;
            font-size: 22px;
            font-weight: 600;
            line-height: 30px;
            color: #ffffff;
            margin: 0;
        }
        
        .modal-divider {
            height: 1px;
            background: rgba(38, 43, 67, 0.2);
        }
        
        .modal-body-pesanan {
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .form-group {
            position: relative;
            width: 100%;
        }
        
        .form-label {
            position: absolute;
            top: -8px;
            left: 10px;
            background: var(--secondary-orange);
            color: #333333;
            font-family: 'Inter', sans-serif;
            font-size: 13px;
            font-weight: 400;
            line-height: 15px;
            padding: 2px 6px;
            border-radius: 4px;
            z-index: 1;
        }
        
        .form-input {
            width: 100%;
            border: 1px solid var(--primary-teal);
            border-radius: 8px;
            padding: 12px 16px;
            font-family: 'Lato', sans-serif;
            font-size: 16px;
            line-height: 26px;
            color: rgba(38, 43, 67, 0.7);
            outline: none;
            transition: border-color 0.2s;
        }
        
        .form-input:focus {
            border-color: var(--primary-teal);
        }
        
        .form-input:readonly {
            background: #f9f9f9;
            cursor: default;
        }
        
        .btn-order-detail,
        .btn-send-order {
            width: 100%;
            border: none;
            border-radius: 10px;
            padding: 8px 26px;
            font-family: 'Lato', sans-serif;
            font-size: 17px;
            font-weight: 500;
            line-height: 26px;
            cursor: pointer;
            box-shadow: 0px 2px 6px 0px rgba(38, 43, 67, 0.14);
            transition: all 0.3s;
        }
        
        .btn-order-detail {
            background: var(--secondary-orange);
            color: #ffffff;
        }
        
        .btn-order-detail:hover {
            background: #e09d2c;
            transform: translateY(-2px);
            box-shadow: 0px 4px 10px 0px rgba(248, 173, 60, 0.3);
        }
        
        .btn-send-order {
            background: var(--secondary-orange);
            color: #ffffff;
        }
        
        .btn-send-order:hover {
            background: #e09d2c;
            transform: translateY(-2px);
            box-shadow: 0px 4px 10px 0px rgba(248, 173, 60, 0.3);
        }

        /* Modal Detail Produk */
        .modal-produk-container {
            background: #ffffff;
            border-radius: 10px;
            box-shadow: 0px 4px 14px 0px rgba(38, 43, 67, 0.16);
            width: 100%;
            max-width: 554px;
            max-height: 90vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 10001;
        }

        .modal-body-produk {
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .product-row {
            display: flex;
            gap: 14px;
            margin-bottom: 0;
        }

        .form-group-product {
            flex: 0 0 409px;
            max-width: 409px;
        }

        .form-group-quantity {
            flex: 1;
            min-width: 0;
        }

        .btn-view-customer {
            width: 100%;
            border: none;
            border-radius: 10px;
            padding: 8px 26px;
            font-family: 'Lato', sans-serif;
            font-size: 17px;
            font-weight: 500;
            line-height: 26px;
            cursor: pointer;
            box-shadow: 0px 2px 6px 0px rgba(38, 43, 67, 0.14);
            transition: all 0.3s;
            background: var(--secondary-orange);
            color: #ffffff;
            margin-top: 0;
        }

        .btn-view-customer:hover {
            background: #e09d2c;
            transform: translateY(-2px);
            box-shadow: 0px 4px 10px 0px rgba(248, 173, 60, 0.3);
        }

        /* Modal Pengiriman Pesanan */
        .modal-pengiriman-container {
            background: #ffffff;
            border-radius: 10px;
            box-shadow: 0px 4px 14px 0px rgba(38, 43, 67, 0.16);
            width: 100%;
            max-width: 554px;
            max-height: 90vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 10002;
        }

        .modal-body-pengiriman {
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .btn-confirm-shipping {
            width: 100%;
            border: none;
            border-radius: 10px;
            padding: 8px 26px;
            font-family: 'Lato', sans-serif;
            font-size: 17px;
            font-weight: 500;
            line-height: 26px;
            cursor: pointer;
            box-shadow: 0px 2px 6px 0px rgba(38, 43, 67, 0.14);
            transition: all 0.3s;
            background: var(--secondary-orange);
            color: #ffffff;
            margin-top: 0;
        }

        .btn-confirm-shipping:hover {
            background: #e09d2c;
            transform: translateY(-2px);
            box-shadow: 0px 4px 10px 0px rgba(248, 173, 60, 0.3);
        }

        /* Modal Konfirmasi Pengiriman */
        .modal-confirm-shipping-container {
            background: #ffffff;
            border-radius: 20px;
            box-shadow: 0px 4px 20px 0px rgba(0, 0, 0, 0.15);
            width: 90%;
            max-width: 680px;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 10003;
            padding: 50px 60px;
        }

        .modal-close-confirm {
            position: absolute;
            right: 24px;
            top: 24px;
            background: transparent;
            border: none;
            color: #4a4a4a;
            font-size: 28px;
            cursor: pointer;
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: color 0.2s;
            z-index: 10;
            font-weight: 300;
        }

        .modal-close-confirm:hover {
            color: #000000;
        }

        .modal-confirm-content {
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .modal-confirm-title {
            font-family: 'Lato', sans-serif;
            font-size: 32px;
            font-weight: 600;
            line-height: 1.3;
            color: #2d2d2d;
            margin: 0 0 24px 0;
            letter-spacing: -0.3px;
            max-width: 560px;
        }

        .modal-confirm-text {
            font-family: 'Lato', sans-serif;
            font-size: 18px;
            font-weight: 400;
            line-height: 1.65;
            color: #5a5a5a;
            margin: 0 0 36px 0;
            text-align: center;
            max-width: 560px;
        }

        .modal-confirm-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-top: 8px;
        }

        .btn-batal-confirm,
        .btn-konfirmasi-confirm {
            padding: 14px 50px;
            border: none;
            border-radius: 12px;
            font-family: 'Lato', sans-serif;
            font-size: 18px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
            min-width: 160px;
            letter-spacing: 0.2px;
        }

        .btn-batal-confirm {
            background: #6c757d;
            color: #ffffff;
            box-shadow: 0px 2px 8px rgba(108, 117, 125, 0.2);
        }

        .btn-batal-confirm:hover {
            background: #5a6268;
            transform: translateY(-2px);
            box-shadow: 0px 4px 12px 0px rgba(108, 117, 125, 0.35);
        }

        .btn-konfirmasi-confirm {
            background: #00a39d;
            color: #ffffff;
            box-shadow: 0px 2px 8px rgba(0, 163, 157, 0.2);
        }

        .btn-konfirmasi-confirm:hover {
            background: #008f8a;
            transform: translateY(-2px);
            box-shadow: 0px 4px 12px 0px rgba(0, 163, 157, 0.35);
        }

        /* Modal Success Pengiriman */
        .modal-success-shipping-container {
            background: #ffffff;
            border-radius: 20px;
            box-shadow: 0px 4px 20px 0px rgba(0, 0, 0, 0.15);
            width: 90%;
            max-width: 550px;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 10004;
            padding: 50px 60px;
        }

        .modal-close-success {
            position: absolute;
            right: 24px;
            top: 24px;
            background: transparent;
            border: none;
            color: #4a4a4a;
            font-size: 28px;
            cursor: pointer;
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: color 0.2s;
            z-index: 10;
            font-weight: 300;
        }

        .modal-close-success:hover {
            color: #000000;
        }

        .modal-success-content {
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .modal-success-title {
            font-family: 'Lato', sans-serif;
            font-size: 30px;
            font-weight: 600;
            line-height: 1.3;
            color: #2d2d2d;
            margin: 0 0 20px 0;
            letter-spacing: -0.3px;
        }

        .modal-success-text {
            font-family: 'Lato', sans-serif;
            font-size: 18px;
            font-weight: 400;
            line-height: 1.65;
            color: #5a5a5a;
            margin: 0 0 36px 0;
        }

        .btn-okay-success {
            padding: 14px 70px;
            border: none;
            border-radius: 12px;
            font-family: 'Lato', sans-serif;
            font-size: 18px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
            background: #00a39d;
            color: #ffffff;
            min-width: 180px;
            letter-spacing: 0.2px;
            box-shadow: 0px 2px 8px rgba(0, 163, 157, 0.2);
            margin-top: 8px;
        }

        .btn-okay-success:hover {
            background: #008f8a;
            transform: translateY(-2px);
            box-shadow: 0px 4px 12px 0px rgba(0, 163, 157, 0.35);
        }
        
        /* RESPONSIVE */
        @media (max-width: 1024px) {
            .dashboard-layout {
                grid-template-columns: 1fr;
                grid-template-rows: 70px 1fr;
                grid-template-areas: "header" "main";
            }
            
            .header__toggle {
                display: flex;
                align-items: center;
                justify-content: center;
            }
            
            .dashboard-sidebar {
                position: fixed;
                left: -280px;
                top: 0;
                width: 280px;
                height: 100vh;
                z-index: 1000;
                transition: left 0.3s ease;
            }
            
            .dashboard-sidebar.open {
                left: 0;
                box-shadow: 2px 0 10px rgba(0,0,0,0.3);
            }
            
            .user-info {
                display: none;
            }
        }
        
        @media (max-width: 768px) {
            .dashboard-main {
                padding: 12px;
            }
            
            .header {
                padding: 0 12px;
            }
            
            .header__search {
                max-width: 200px;
            }
            
            .search-decoration,
            .header-decoration-right {
                display: none;
            }
            
            .breadcrumb {
                flex-direction: column;
                align-items: flex-start;
                gap: 12px;
            }
            
            .table-card {
                padding: 16px;
            }
            
            .table-header {
                flex-direction: column;
                align-items: flex-start;
            }
            
            table {
                font-size: 12px;
                display: block;
                overflow-x: auto;
            }
            
            th, td {
                padding: 12px 8px;
                font-size: 12px;
            }
            
            .modal-pesanan-container,
            .modal-produk-container,
            .modal-pengiriman-container {
                max-width: 90%;
                margin: 0 12px;
            }
            
            .modal-confirm-shipping-container,
            .modal-success-shipping-container {
                max-width: 90%;
                margin: 0 12px;
                padding: 32px 28px;
            }
            
            .modal-confirm-title {
                font-size: 22px;
                margin-bottom: 18px;
            }
            
            .modal-success-title {
                font-size: 20px;
                margin-bottom: 16px;
            }
            
            .modal-confirm-text,
            .modal-success-text {
                font-size: 15px;
                margin-bottom: 28px;
            }
            
            .modal-confirm-buttons {
                flex-direction: column;
                gap: 14px;
                margin-top: 0;
            }
            
            .btn-batal-confirm,
            .btn-konfirmasi-confirm {
                width: 100%;
                min-width: auto;
                padding: 12px 40px;
                font-size: 16px;
            }
            
            .btn-okay-success {
                width: 100%;
                min-width: auto;
                padding: 12px 50px;
                font-size: 16px;
            }
            
            .modal-close-confirm,
            .modal-close-success {
                right: 16px;
                top: 16px;
                font-size: 24px;
            }
            
            .modal-title {
                font-size: 18px;
            }
            
            .modal-body-pesanan,
            .modal-body-produk,
            .modal-body-pengiriman {
                padding: 16px;
            }
            
            .form-label {
                font-size: 12px;
            }
            
            .form-input {
                font-size: 14px;
                padding: 10px 12px;
            }
            
            .btn-order-detail,
            .btn-send-order,
            .btn-view-customer,
            .btn-confirm-shipping {
                font-size: 15px;
                padding: 8px 16px;
            }

            .product-row {
                flex-direction: column;
                gap: 20px;
            }

            .form-group-product,
            .form-group-quantity {
                flex: 1;
                max-width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="dashboard-layout">
        <!-- SIDEBAR -->
        <aside class="dashboard-sidebar" id="sidebar">
            <div class="sidebar">
                <div class="sidebar__logo">
                    <div class="logo-text">
                        <span class="logo-text__brand">BSI</span>
                        <div>
                            <div class="logo-text__subtitle">UMKM CENTER</div>
                            <div class="logo-text__subtitle">YOGYAKARTA</div>
                        </div>
                        <svg class="logo-star" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z" fill="currentColor"/>
                        </svg>
                    </div>
                </div>
                <nav>
                    <ul class="nav-list">
                        <li class="nav-item">
                            <a href="dashboard-inline.html" class="nav-link">
                                <i class="nav-icon fas fa-th-large"></i>
                                <span>Dashboard</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="kelola-produk.html" class="nav-link">
                                <i class="nav-icon fas fa-box"></i>
                                <span>Kelola Produk</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="kelola-keuangan.html" class="nav-link">
                                <i class="nav-icon fas fa-wallet"></i>
                                <span>Kelola Keuangan</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="kelola-umkm.html" class="nav-link">
                                <i class="nav-icon fas fa-store"></i>
                                <span>Kelola UMKM</span>
                            </a>
                        </li>
                        <li class="nav-item nav-item-has-submenu submenu-open">
                            <a href="#" class="nav-link" id="kelolaPenggunaToggle">
                                <i class="nav-icon fas fa-users"></i>
                                <span>Kelola Pengguna</span>
                                <i class="submenu-arrow fas fa-chevron-up"></i>
                            </a>
                            <ul class="nav-submenu" id="kelolaPenggunaSubmenu">
                                <li class="nav-submenu-item">
                                    <a href="kelola-pengguna.html" class="nav-submenu-link">Kelola Pengguna</a>
                                </li>
                                <li class="nav-submenu-item">
                                    <a href="pesanan.html" class="nav-submenu-link active">Pesanan</a>
                                </li>
                                <li class="nav-submenu-item">
                                    <a href="pengiriman.html" class="nav-submenu-link">Pengiriman</a>
                                </li>
                                <li class="nav-submenu-item">
                                    <a href="penjualan.html" class="nav-submenu-link">Penjualan</a>
                                </li>
                            </ul>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link">
                                <i class="nav-icon fas fa-question-circle"></i>
                                <span>Bantuan</span>
                            </a>
                        </li>
                    </ul>
                </nav>
            </div>
        </aside>
        
        <!-- HEADER -->
        <header class="dashboard-header">
            <div class="header">
                <button class="header__toggle" id="sidebarToggle">
                    <i class="fas fa-bars"></i>
                </button>
                <div class="header__search">
                    <i class="fas fa-search" style="color: #6C757D;"></i>
                    <input type="text" class="search-input" placeholder="Type to search...">
                    <img src="../assets/images/Shape Left Down.webp" alt="" class="search-decoration">
                </div>
                <div class="header__actions">
                    <img src="../assets/images/Shape Right Up.webp" alt="" class="header-decoration-right">
                    <button class="action-btn">
                        <i class="fas fa-bell"></i>
                        <span class="action-badge">3</span>
                    </button>
                    <button class="action-btn">
                        <i class="fas fa-comment-alt"></i>
                        <span class="action-badge">5</span>
                    </button>
                    <button class="user-profile__toggle">
                        <img src="https://ui-avatars.com/api/?name=Thomas+Anree&background=00A39D&color=fff" class="user-avatar">
                        <div class="user-info">
                            <span class="user-name">Thomas Anree</span>
                            <span class="user-role">Administrator</span>
                        </div>
                        <i class="fas fa-chevron-down" style="color: #6C757D; font-size: 14px; margin-left: 8px;"></i>
                    </button>
                </div>
            </div>
        </header>
        
        <!-- MAIN CONTENT -->
        <main class="dashboard-main">
            <!-- BREADCRUMB -->
            <div class="breadcrumb">
                <h1 class="breadcrumb-title">Pesanan</h1>
                <div class="breadcrumb-nav">
                    <a href="dashboard-inline.html">Dashboard</a>
                    <span>/</span>
                    <span>Pesanan</span>
                </div>
            </div>
            
            <!-- TABLE -->
            <div class="table-card">
                <div class="table-header">
                    <div class="table-search">
                        <i class="fas fa-search" style="color: #6C757D;"></i>
                        <input type="text" placeholder="Cari Pesanan">
                    </div>
                </div>
                
                <table>
                    <thead>
                        <tr>
                            <th style="width: 100px;">ID Pesanan</th>
                            <th style="width: 180px;">Nama Pengguna</th>
                            <th style="width: 80px;">Produk</th>
                            <th style="width: 120px;">Total Harga</th>
                            <th style="width: 100px;">Tanggal</th>
                            <th style="width: 200px;">Email</th>
                            <th style="width: 250px;">Alamat</th>
                            <th style="width: 80px;">Aksi</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>E001</td>
                            <td>Mamat guncop el rumi</td>
                            <td>2</td>
                            <td>Rp. 100.000</td>
                            <td>20/12/2025</td>
                            <td>mamat@gun.shop.com</td>
                            <td>Jl. Lorem ipsum dolor sit amet lorem lorem ipsum...</td>
                            <td>
                                <div class="action-icons">
                                    <i class="fas fa-eye action-icon" title="Lihat Detail"></i>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>E002</td>
                            <td>Budi Santoso</td>
                            <td>3</td>
                            <td>Rp. 250.000</td>
                            <td>21/12/2025</td>
                            <td>budi.santoso@email.com</td>
                            <td>Jl. Merdeka No. 123, Jakarta Pusat</td>
                            <td>
                                <div class="action-icons">
                                    <i class="fas fa-eye action-icon" title="Lihat Detail"></i>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>E003</td>
                            <td>Siti Nurhaliza</td>
                            <td>1</td>
                            <td>Rp. 75.000</td>
                            <td>22/12/2025</td>
                            <td>siti.nur@email.com</td>
                            <td>Jl. Diponegoro No. 456, Bandung</td>
                            <td>
                                <div class="action-icons">
                                    <i class="fas fa-eye action-icon" title="Lihat Detail"></i>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>E004</td>
                            <td>Ahmad Wijaya</td>
                            <td>4</td>
                            <td>Rp. 350.000</td>
                            <td>23/12/2025</td>
                            <td>ahmad.wijaya@email.com</td>
                            <td>Jl. Sudirman No. 789, Surabaya</td>
                            <td>
                                <div class="action-icons">
                                    <i class="fas fa-eye action-icon" title="Lihat Detail"></i>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>E005</td>
                            <td>Rina Kartika</td>
                            <td>2</td>
                            <td>Rp. 150.000</td>
                            <td>24/12/2025</td>
                            <td>rina.kartika@email.com</td>
                            <td>Jl. Gatot Subroto No. 321, Yogyakarta</td>
                            <td>
                                <div class="action-icons">
                                    <i class="fas fa-eye action-icon" title="Lihat Detail"></i>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
                
                <div class="table-pagination">
                    <span>1-5 of 29</span>
                    <div class="pagination-controls">
                        <button class="pagination-btn" disabled>
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <button class="pagination-btn">
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                </div>
            </div>
        </main>
    </div>
    
    <!-- Modal Detail Pesanan -->
    <div id="detailPesananModal" class="modal-overlay">
        <div class="modal-pesanan-container">
            <button id="closePesananModal" class="modal-close">
                <i class="fas fa-times"></i>
            </button>
            <div class="modal-header">
                <h2 class="modal-title">Detail Pesanan</h2>
            </div>
            <div class="modal-divider"></div>
            <div class="modal-body-pesanan">
                <div class="form-group">
                    <label class="form-label">ID Pesanan</label>
                    <input type="text" id="modalOrderId" class="form-input" readonly>
                </div>
                <div class="form-group">
                    <label class="form-label">ID Pengguna</label>
                    <input type="text" id="modalUserId" class="form-input" readonly>
                </div>
                <div class="form-group">
                    <label class="form-label">Nama Pengguna</label>
                    <input type="text" id="modalUserName" class="form-input" readonly>
                </div>
                <div class="form-group">
                    <label class="form-label">Email</label>
                    <input type="text" id="modalUserEmail" class="form-input" readonly>
                </div>
                <div class="form-group">
                    <label class="form-label">Tanggal Pesanan</label>
                    <input type="text" id="modalOrderDate" class="form-input" readonly>
                </div>
                <div class="form-group">
                    <label class="form-label">Alamat</label>
                    <input type="text" id="modalOrderAddress" class="form-input" readonly>
                </div>
                <div class="form-group">
                    <label class="form-label">Total Harga</label>
                    <input type="text" id="modalOrderTotal" class="form-input" readonly>
                </div>
                <button class="btn-order-detail" id="btnViewOrderDetail">
                    Lihat Detail Pesanan
                </button>
                <button class="btn-send-order">
                    Kirim Pesanan
                </button>
            </div>
        </div>
    </div>
    
    <!-- Modal Detail Produk Pesanan -->
    <div id="detailProdukModal" class="modal-overlay">
        <div class="modal-produk-container">
            <button id="closeProdukModal" class="modal-close">
                <i class="fas fa-times"></i>
            </button>
            <div class="modal-header">
                <h2 class="modal-title">Detail Pesanan</h2>
            </div>
            <div class="modal-divider"></div>
            <div class="modal-body-produk">
                <!-- Product Row -->
                <div class="product-row">
                    <div class="form-group form-group-product">
                        <label class="form-label">Pesanan 1</label>
                        <input type="text" id="modalProduct1" class="form-input" value="Nama Produk, Jenis (Autofill)" readonly>
                    </div>
                    <div class="form-group form-group-quantity">
                        <label class="form-label">Quantity</label>
                        <input type="text" id="modalQuantity1" class="form-input" value="Autofill" readonly>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Total Harga</label>
                    <input type="text" id="modalProductTotal" class="form-input" readonly>
                </div>
                <div class="form-group">
                    <label class="form-label">Catatan Pesanan</label>
                    <input type="text" id="modalOrderNote" class="form-input" value="Auto fill" readonly>
                </div>
                <button class="btn-view-customer">
                    Lihat Detail Pemesan
                </button>
                <button class="btn-send-order" id="btnSendOrderProduk">
                    Kirim Pesanan
                </button>
            </div>
        </div>
    </div>
    
    <!-- Modal Pengiriman Pesanan -->
    <div id="pengirimanModal" class="modal-overlay">
        <div class="modal-pengiriman-container">
            <button id="closePengirimanModal" class="modal-close">
                <i class="fas fa-times"></i>
            </button>
            <div class="modal-header">
                <h2 class="modal-title">Pengiriman Pesanan</h2>
            </div>
            <div class="modal-divider"></div>
            <div class="modal-body-pengiriman">
                <div class="form-group">
                    <label class="form-label">ID Pesanan</label>
                    <input type="text" id="modalShipOrderId" class="form-input" value="Auto fill" readonly>
                </div>
                <div class="form-group">
                    <label class="form-label">ID Pengguna</label>
                    <input type="text" id="modalShipUserId" class="form-input" value="Auto fill" readonly>
                </div>
                <div class="form-group">
                    <label class="form-label">Nama Pengguna</label>
                    <input type="text" id="modalShipUserName" class="form-input" value="Auto fill" readonly>
                </div>
                <div class="form-group">
                    <label class="form-label">Email</label>
                    <input type="text" id="modalShipEmail" class="form-input" value="Auto fill" readonly>
                </div>
                <div class="form-group">
                    <label class="form-label">Tanggal Pesanan</label>
                    <input type="text" id="modalShipOrderDate" class="form-input" value="Auto fill" readonly>
                </div>
                <div class="form-group">
                    <label class="form-label">Alamat</label>
                    <input type="text" id="modalShipAddress" class="form-input" value="Auto fill" readonly>
                </div>
                <div class="form-group">
                    <label class="form-label">Tanggal Pengiriman</label>
                    <input type="date" id="modalShipDate" class="form-input" placeholder="Masukkan Tanggal Pengiriman...">
                </div>
                <div class="form-group">
                    <label class="form-label">Nomor Resi</label>
                    <input type="text" id="modalShipResi" class="form-input" placeholder="Masukkan Nomor Resi Pengiriman...">
                </div>
                <button class="btn-confirm-shipping" id="btnConfirmShipping">
                    Konfirmasi Pengiriman
                </button>
            </div>
        </div>
    </div>
    
    <!-- Modal Konfirmasi Pengiriman -->
    <div id="confirmShippingModal" class="modal-overlay">
        <div class="modal-confirm-shipping-container">
            <button id="closeConfirmShippingModal" class="modal-close-confirm">
                <i class="fas fa-times"></i>
            </button>
            <div class="modal-confirm-content">
                <h2 class="modal-confirm-title">Kamu yakin ingin mengonfirmasi pengiriman pesanan ini ðŸ“¦?</h2>
                <p class="modal-confirm-text">
                    Setelah dikonfirmasi, data pesanan akan dianggap sudah dikirim dan tidak dapat diubah kembali.
                    Pastikan semua informasi seperti tanggal pengiriman dan nomor resi sudah benar sebelum melanjutkan. Kamu
                    masih bisa meninjau ulang jika belum yakin. tekan Batal untuk memeriksa lagi,
                    atau Konfirmasi jika pengiriman sudah benar dan siap dikirim ðŸššðŸ’¨
                </p>
                <div class="modal-confirm-buttons">
                    <button class="btn-batal-confirm">Batal</button>
                    <button class="btn-konfirmasi-confirm">Konfirmasi</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modal Success Pengiriman -->
    <div id="successShippingModal" class="modal-overlay">
        <div class="modal-success-shipping-container">
            <button id="closeSuccessShippingModal" class="modal-close-success">
                <i class="fas fa-times"></i>
            </button>
            <div class="modal-success-content">
                <h2 class="modal-success-title">Data Kamu telah berhasil disimpan! ðŸ’¾âœ¨</h2>
                <p class="modal-success-text">
                    Semua perubahan telah disimpan dan aman.<br>
                    Kamu bisa melanjutkan pekerjaan tanpa khawatir. ðŸ‘
                </p>
                <button class="btn-okay-success">Okay</button>
            </div>
        </div>
    </div>
    
    <script>
        // Sidebar toggle for mobile
        const sidebarToggle = document.getElementById('sidebarToggle');
        const sidebar = document.getElementById('sidebar');
        
        if (sidebarToggle && sidebar) {
            sidebarToggle.addEventListener('click', function() {
                sidebar.classList.toggle('open');
            });
            
            // Close sidebar when clicking outside
            document.addEventListener('click', function(e) {
                if (window.innerWidth <= 1024) {
                    if (!sidebar.contains(e.target) && !sidebarToggle.contains(e.target)) {
                        sidebar.classList.remove('open');
                    }
                }
            });
        }
        
        // Submenu Toggle Functionality
        const kelolaPenggunaToggle = document.getElementById('kelolaPenggunaToggle');
        const kelolaPenggunaSubmenu = document.getElementById('kelolaPenggunaSubmenu');
        
        if (kelolaPenggunaToggle) {
            kelolaPenggunaToggle.addEventListener('click', function(e) {
                e.preventDefault();
                const parentItem = this.closest('.nav-item-has-submenu');
                parentItem.classList.toggle('submenu-open');
            });
        }
        
        // Modal Detail Pesanan Functionality
        const pesananModal = document.getElementById('detailPesananModal');
        const closePesananModalBtn = document.getElementById('closePesananModal');
        const viewPesananButtons = document.querySelectorAll('.fa-eye.action-icon');
        
        console.log('Pesanan modal script loaded');
        console.log('Found pesanan modal:', pesananModal);
        console.log('Found eye icons:', viewPesananButtons.length);
        
        // Open modal when eye icon is clicked
        viewPesananButtons.forEach(button => {
            button.addEventListener('click', function(e) {
                e.preventDefault();
                e.stopPropagation();
                console.log('Eye icon clicked');
                
                const row = this.closest('tr');
                if (!row) {
                    console.error('Row not found');
                    return;
                }
                
                const orderId = row.cells[0].textContent.trim();
                const userName = row.cells[1].textContent.trim();
                const products = row.cells[2].textContent.trim();
                const totalPrice = row.cells[3].textContent.trim();
                const orderDate = row.cells[4].textContent.trim();
                const userEmail = row.cells[5].textContent.trim();
                const address = row.cells[6].textContent.trim();
                
                console.log('Order data:', {orderId, userName, products, totalPrice, orderDate, userEmail, address});
                
                // Fill modal with order data
                document.getElementById('modalOrderId').value = orderId;
                document.getElementById('modalUserId').value = orderId.replace('E', 'U'); // Generate user ID
                document.getElementById('modalUserName').value = userName;
                document.getElementById('modalUserEmail').value = userEmail;
                document.getElementById('modalOrderDate').value = orderDate;
                document.getElementById('modalOrderAddress').value = address;
                document.getElementById('modalOrderTotal').value = totalPrice;
                
                // Show modal
                if (pesananModal) {
                    pesananModal.style.display = 'flex';
                    document.body.style.overflow = 'hidden';
                    console.log('Pesanan modal displayed');
                } else {
                    console.error('Pesanan modal not found');
                }
            });
        });
        
        // Close modal when close button is clicked
        if (closePesananModalBtn) {
            closePesananModalBtn.addEventListener('click', function() {
                pesananModal.style.display = 'none';
                document.body.style.overflow = 'auto';
            });
        }
        
        // Close modal when clicking outside the modal content
        window.addEventListener('click', function(e) {
            if (e.target === pesananModal) {
                pesananModal.style.display = 'none';
                document.body.style.overflow = 'auto';
            }
        });
        
        // Close modal with Escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' && pesananModal.style.display === 'flex') {
                pesananModal.style.display = 'none';
                document.body.style.overflow = 'auto';
            }
        });
        
        // Button actions inside modal
        const btnOrderDetail = document.querySelector('.btn-order-detail');
        const btnSendOrder = document.querySelector('.btn-send-order');

        // Modal Detail Produk Functionality
        const produkModal = document.getElementById('detailProdukModal');
        const closeProdukModalBtn = document.getElementById('closeProdukModal');
        
        // Open detail produk modal when "Lihat Detail Pesanan" is clicked
        if (btnOrderDetail) {
            btnOrderDetail.addEventListener('click', function(e) {
                e.preventDefault();
                console.log('Opening detail produk modal');
                
                // Get data from pesanan modal
                const orderId = document.getElementById('modalOrderId').value;
                const products = document.getElementById('modalUserId').value; // You can get actual product data
                const totalPrice = document.getElementById('modalOrderTotal').value;
                
                // Fill produk modal
                document.getElementById('modalProduct1').value = products + ' (Sample Product)';
                document.getElementById('modalQuantity1').value = '2 pcs';
                document.getElementById('modalProductTotal').value = totalPrice;
                document.getElementById('modalOrderNote').value = 'Silakan dikemas dengan rapi';
                
                // Hide pesanan modal and show produk modal
                if (pesananModal) {
                    pesananModal.style.display = 'none';
                }
                if (produkModal) {
                    produkModal.style.display = 'flex';
                    console.log('Detail produk modal displayed');
                }
            });
        }
        
        // Close produk modal when close button is clicked
        if (closeProdukModalBtn) {
            closeProdukModalBtn.addEventListener('click', function() {
                produkModal.style.display = 'none';
                // Show pesanan modal again
                if (pesananModal) {
                    pesananModal.style.display = 'flex';
                }
            });
        }
        
        // Close produk modal when clicking outside
        window.addEventListener('click', function(e) {
            if (e.target === produkModal) {
                produkModal.style.display = 'none';
                // Show pesanan modal again
                if (pesananModal) {
                    pesananModal.style.display = 'flex';
                }
            }
        });
        
        // Close produk modal with Escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' && produkModal.style.display === 'flex') {
                produkModal.style.display = 'none';
                // Show pesanan modal again
                if (pesananModal) {
                    pesananModal.style.display = 'flex';
                }
            }
        });

        // Modal Pengiriman Pesanan Functionality
        const pengirimanModal = document.getElementById('pengirimanModal');
        const closePengirimanModalBtn = document.getElementById('closePengirimanModal');
        const btnSendOrderProduk = document.getElementById('btnSendOrderProduk');
        let previousModal = null; // Track which modal opened pengiriman modal
        
        // Open pengiriman modal when "Kirim Pesanan" is clicked from detail pesanan modal
        if (btnSendOrder) {
            btnSendOrder.addEventListener('click', function(e) {
                e.preventDefault();
                console.log('Opening pengiriman modal from detail pesanan');
                
                // Get data from pesanan modal
                const orderId = document.getElementById('modalOrderId').value;
                const userId = document.getElementById('modalUserId').value;
                const userName = document.getElementById('modalUserName').value;
                const userEmail = document.getElementById('modalUserEmail').value;
                const orderDate = document.getElementById('modalOrderDate').value;
                const address = document.getElementById('modalOrderAddress').value;
                
                // Fill pengiriman modal
                document.getElementById('modalShipOrderId').value = orderId;
                document.getElementById('modalShipUserId').value = userId;
                document.getElementById('modalShipUserName').value = userName;
                document.getElementById('modalShipEmail').value = userEmail;
                document.getElementById('modalShipOrderDate').value = orderDate;
                document.getElementById('modalShipAddress').value = address;
                
                // Clear input fields
                document.getElementById('modalShipDate').value = '';
                document.getElementById('modalShipResi').value = '';
                
                // Set previous modal
                previousModal = 'pesanan';
                
                // Hide pesanan modal and show pengiriman modal
                if (pesananModal) {
                    pesananModal.style.display = 'none';
                }
                if (pengirimanModal) {
                    pengirimanModal.style.display = 'flex';
                    console.log('Pengiriman modal displayed');
                }
            });
        }
        
        // Open pengiriman modal when "Kirim Pesanan" is clicked from produk modal
        if (btnSendOrderProduk) {
            btnSendOrderProduk.addEventListener('click', function(e) {
                e.preventDefault();
                console.log('Opening pengiriman modal from produk');
                
                // Get data from pesanan modal (still stored)
                const orderId = document.getElementById('modalOrderId').value;
                const userId = document.getElementById('modalUserId').value;
                const userName = document.getElementById('modalUserName').value;
                const userEmail = document.getElementById('modalUserEmail').value;
                const orderDate = document.getElementById('modalOrderDate').value;
                const address = document.getElementById('modalOrderAddress').value;
                
                // Fill pengiriman modal
                document.getElementById('modalShipOrderId').value = orderId;
                document.getElementById('modalShipUserId').value = userId;
                document.getElementById('modalShipUserName').value = userName;
                document.getElementById('modalShipEmail').value = userEmail;
                document.getElementById('modalShipOrderDate').value = orderDate;
                document.getElementById('modalShipAddress').value = address;
                
                // Clear input fields
                document.getElementById('modalShipDate').value = '';
                document.getElementById('modalShipResi').value = '';
                
                // Set previous modal
                previousModal = 'produk';
                
                // Hide produk modal and show pengiriman modal
                if (produkModal) {
                    produkModal.style.display = 'none';
                }
                if (pengirimanModal) {
                    pengirimanModal.style.display = 'flex';
                    console.log('Pengiriman modal displayed');
                }
            });
        }
        
        // Close pengiriman modal when close button is clicked
        if (closePengirimanModalBtn) {
            closePengirimanModalBtn.addEventListener('click', function() {
                pengirimanModal.style.display = 'none';
                // Show previous modal based on which one opened it
                if (previousModal === 'pesanan') {
                    if (pesananModal) {
                        pesananModal.style.display = 'flex';
                    }
                } else if (previousModal === 'produk') {
                    if (produkModal) {
                        produkModal.style.display = 'flex';
                    }
                }
            });
        }
        
        // Close pengiriman modal when clicking outside
        window.addEventListener('click', function(e) {
            if (e.target === pengirimanModal) {
                pengirimanModal.style.display = 'none';
                // Show previous modal based on which one opened it
                if (previousModal === 'pesanan') {
                    if (pesananModal) {
                        pesananModal.style.display = 'flex';
                    }
                } else if (previousModal === 'produk') {
                    if (produkModal) {
                        produkModal.style.display = 'flex';
                    }
                }
            }
        });
        
        // Close pengiriman modal with Escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' && pengirimanModal.style.display === 'flex') {
                pengirimanModal.style.display = 'none';
                // Show previous modal based on which one opened it
                if (previousModal === 'pesanan') {
                    if (pesananModal) {
                        pesananModal.style.display = 'flex';
                    }
                } else if (previousModal === 'produk') {
                    if (produkModal) {
                        produkModal.style.display = 'flex';
                    }
                }
            }
        });
        
        // Modal Konfirmasi Pengiriman Functionality
        const confirmShippingModal = document.getElementById('confirmShippingModal');
        const closeConfirmShippingModalBtn = document.getElementById('closeConfirmShippingModal');
        const btnBatalConfirm = document.querySelector('.btn-batal-confirm');
        const btnKonfirmasiConfirm = document.querySelector('.btn-konfirmasi-confirm');
        
        // Handle konfirmasi pengiriman - open confirmation modal
        const btnConfirmShipping = document.getElementById('btnConfirmShipping');
        if (btnConfirmShipping) {
            btnConfirmShipping.addEventListener('click', function(e) {
                e.preventDefault();
                const shipDate = document.getElementById('modalShipDate').value;
                const resiNumber = document.getElementById('modalShipResi').value;
                
                if (!shipDate || !resiNumber) {
                    alert('Harap lengkapi Tanggal Pengiriman dan Nomor Resi!');
                    return;
                }
                
                // Hide pengiriman modal and show confirmation modal
                if (pengirimanModal) {
                    pengirimanModal.style.display = 'none';
                }
                if (confirmShippingModal) {
                    confirmShippingModal.style.display = 'flex';
                }
            });
        }
        
        // Close confirm modal - back to pengiriman modal
        if (closeConfirmShippingModalBtn) {
            closeConfirmShippingModalBtn.addEventListener('click', function() {
                confirmShippingModal.style.display = 'none';
                if (pengirimanModal) {
                    pengirimanModal.style.display = 'flex';
                }
            });
        }
        
        // Batal button - back to pengiriman modal
        if (btnBatalConfirm) {
            btnBatalConfirm.addEventListener('click', function() {
                confirmShippingModal.style.display = 'none';
                if (pengirimanModal) {
                    pengirimanModal.style.display = 'flex';
                }
            });
        }
        
        // Close confirm modal when clicking outside
        window.addEventListener('click', function(e) {
            if (e.target === confirmShippingModal) {
                confirmShippingModal.style.display = 'none';
                if (pengirimanModal) {
                    pengirimanModal.style.display = 'flex';
                }
            }
        });
        
        // Close confirm modal with Escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' && confirmShippingModal.style.display === 'flex') {
                confirmShippingModal.style.display = 'none';
                if (pengirimanModal) {
                    pengirimanModal.style.display = 'flex';
                }
            }
        });
        
        // Modal Success Pengiriman Functionality
        const successShippingModal = document.getElementById('successShippingModal');
        const closeSuccessShippingModalBtn = document.getElementById('closeSuccessShippingModal');
        const btnOkaySuccess = document.querySelector('.btn-okay-success');
        
        // Konfirmasi button - show success modal
        if (btnKonfirmasiConfirm) {
            btnKonfirmasiConfirm.addEventListener('click', function() {
                // Hide confirm modal and show success modal
                if (confirmShippingModal) {
                    confirmShippingModal.style.display = 'none';
                }
                if (successShippingModal) {
                    successShippingModal.style.display = 'flex';
                }
            });
        }
        
        // Close success modal - close all modals
        if (closeSuccessShippingModalBtn) {
            closeSuccessShippingModalBtn.addEventListener('click', function() {
                successShippingModal.style.display = 'none';
                pengirimanModal.style.display = 'none';
                produkModal.style.display = 'none';
                pesananModal.style.display = 'none';
                document.body.style.overflow = 'auto';
            });
        }
        
        // Okay button - close all modals
        if (btnOkaySuccess) {
            btnOkaySuccess.addEventListener('click', function() {
                successShippingModal.style.display = 'none';
                pengirimanModal.style.display = 'none';
                produkModal.style.display = 'none';
                pesananModal.style.display = 'none';
                document.body.style.overflow = 'auto';
            });
        }
        
        // Close success modal when clicking outside
        window.addEventListener('click', function(e) {
            if (e.target === successShippingModal) {
                successShippingModal.style.display = 'none';
                pengirimanModal.style.display = 'none';
                produkModal.style.display = 'none';
                pesananModal.style.display = 'none';
                document.body.style.overflow = 'auto';
            }
        });
        
        // Close success modal with Escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' && successShippingModal.style.display === 'flex') {
                successShippingModal.style.display = 'none';
                pengirimanModal.style.display = 'none';
                produkModal.style.display = 'none';
                pesananModal.style.display = 'none';
                document.body.style.overflow = 'auto';
            }
        });
    </script>
</body>
</html>
